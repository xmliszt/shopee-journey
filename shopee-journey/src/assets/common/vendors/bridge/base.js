const canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),isShopeeApp=()=>(void 0===window._isShopeeApp_&&(window._isShopeeApp_=navigator.userAgent.indexOf("Shopee")>=0),window._isShopeeApp_),isSupportedThirdPartyApp=()=>!!window.navigator.userAgent&&!!window.navigator.userAgent.match(/airpay|now/i);var CUSTOM_PROTOCOL_SCHEME="wvjbscheme",QUEUE_HAS_MESSAGE="__WVJB_QUEUE_MESSAGE__";!function(){if(canUseDOM&&(isShopeeApp()||isSupportedThirdPartyApp())){var e,i=[],n=[],a={},r={},t=1,d={};window.WebViewJavascriptBridge={init:function(e){if(window.WebViewJavascriptBridge._messageHandler)return console.warn("WebViewJavascriptBridge.init called twice"),null;window.WebViewJavascriptBridge._messageHandler=[e];var i=n;n=null,setTimeout(function(){if(i)for(var e=0;e<i.length;e++)w(i[e])},0)},send:function(e,i){c({data:e},i)},registerHandler:function(e,i,n){void 0===a[e]&&(a[e]={}),n=n||i.toString(),a[e][n]=i,l(e)},unregisterHandler:function(e,i){if(i){var n=a[e];if(n){delete n[i];var r=!1;for(var t in n)if(n.hasOwnProperty(t)){r=!0;break}r||(delete a[e],l(e))}}},callHandler:function(e,i,n){for(var a in d)if(d.hasOwnProperty(a))try{d[a](e,i)}catch(e){}if("fullScreenImage"==e&&i){var r=i.imageUrls;if(r&&r.length)try{for(var t=0;t<r.length;t++){var o=r[t];"string"!=typeof o||o.indexOf(window.ITEM_IMAGE_BASE_URL)<0||(r[t]=o.replace("/webp/","/"))}}catch(e){}}c({handlerName:e,data:i},n)},hasHandler:p,hasHandlerCB:l,addHook:function(e){var i=e.toString();d[i]||(d[i]=e)},delHook:function(e){var i=e.toString();delete d[i]},appHasHandler:function(e){return window.WebViewJavascriptBridge._appHandlers&&window.WebViewJavascriptBridge._appHandlers.indexOf(e)>=0},_fetchQueue:function(){var e=JSON.stringify(i);return i=[],e},_handleMessageFromObjC:function(e){n?n.push(e):w(e)},reset:function(){i=[],n=[],a={},r={},t=1,window.WebViewJavascriptBridge._messageHandler=null}},window.bridgeCallHandler=window.WebViewJavascriptBridge.callHandler,window.bridgeRegisterHandler=window.WebViewJavascriptBridge.registerHandler,window.bridgeUnRegisterHandler=window.WebViewJavascriptBridge.unregisterHandler;var o=document;!function(i){(e=i.createElement("iframe")).style.display="none",e.src=CUSTOM_PROTOCOL_SCHEME+"://"+QUEUE_HAS_MESSAGE,i&&i.documentElement&&i.documentElement.appendChild(e)}(o);var s=o.createEvent("Events");s.initEvent("WebViewJavascriptBridgeReady"),s.bridge=window.WebViewJavascriptBridge,o.dispatchEvent(s)}function c(n,a){if(!window.__appHasPendingCacheUpdate__){if(a){var d="cb_"+t+++"_"+ +new Date;r[d]=a,n.callbackId=d}-1==window.navigator.userAgent.toLowerCase().indexOf("android")?(i.push(n),e.src=CUSTOM_PROTOCOL_SCHEME+"://"+QUEUE_HAS_MESSAGE):window.gabridge.sendMsg(JSON.stringify(n))}}function w(e){if(!window.__appHasPendingCacheUpdate__){try{var i=JSON.parse(e)}catch(e){i={},console.warn("Bridge dispatch failed. err = "+e)}if(i.responseId){if(!(n=r[i.responseId]))return;n(i.responseData),delete r[i.responseId]}else{var n;if(i.callbackId){var t=i.callbackId;n=function(e){c({responseId:t,responseData:e})}}var d=window.WebViewJavascriptBridge._messageHandler;if(i.handlerName&&(d=a[i.handlerName]),void 0===d)return;for(var o in d)if(d.hasOwnProperty(o))try{d[o](i.data,n)}catch(e){"undefined"!=typeof console&&console.log("WebViewJavascriptBridge: WARNING: javascript handler threw.",i,e)}}}}function p(e){let i=!1;try{i=null!=a[e]}catch(e){i=!1}return i?"true":"false"}function l(e){window.gabridge&&window.gabridge.onHasHandler(e,p(e))}}(),window.connectWebViewJavascriptBridge=function(e){window.WebViewJavascriptBridge?e(window.WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",function(){dismissNonShopeeBridge()||e(window.WebViewJavascriptBridge)},!1)};if(!window.WebViewJavascriptBridge){window.bridgeCallHandler=function(){},window.bridgeRegisterHandler=function(){},window.bridgeUnRegisterHandler=function(){}}
